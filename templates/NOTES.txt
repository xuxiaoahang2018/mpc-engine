========================================
ğŸ‰ ç§»åŠ¨å¤šæ–¹å®‰å…¨è®¡ç®—é¡¹ç›®å·²æˆåŠŸéƒ¨ç½²ï¼
========================================

æ‚¨çš„ {{ .Chart.Name }} ç‰ˆæœ¬ {{ .Chart.Version }} å·²éƒ¨ç½²åˆ°å‘½åç©ºé—´ {{ .Release.Namespace }}

éƒ¨ç½²çš„ç»„ä»¶ï¼š
{{- if .Values.company.enabled }}
âœ“ Company èŠ‚ç‚¹ï¼ˆç”²æ–¹/æœåŠ¡å™¨ï¼‰
{{- end }}
{{- if .Values.partner.enabled }}
âœ“ Partner èŠ‚ç‚¹ï¼ˆä¹™æ–¹/å®¢æˆ·ç«¯ï¼‰
{{- end }}
{{- if .Values.coordinator.enabled }}
âœ“ Coordinator èŠ‚ç‚¹ï¼ˆåè°ƒè€…ï¼‰
{{- end }}
{{- if .Values.webui.enabled }}
âœ“ Web UI ç•Œé¢
{{- end }}

è®¿é—® Web UIï¼š
{{- if .Values.webui.enabled }}
{{- if .Values.webui.ingress.enabled }}
  é€šè¿‡ Ingress:
  {{- range .Values.webui.ingress.hosts }}
  http{{ if $.Values.webui.ingress.tls }}s{{ end }}://{{ .host }}
  {{- end }}
{{- else if eq .Values.webui.service.type "LoadBalancer" }}
  
  è·å–å¤–éƒ¨ IPï¼š
  export SERVICE_IP=$(kubectl get svc {{ include "mobile-mpc.fullname" . }}-webui -n {{ .Release.Namespace }} -o jsonpath='{.status.loadBalancer.ingress[0].ip}')
  echo "è®¿é—®åœ°å€: http://$SERVICE_IP:{{ .Values.webui.service.port }}"

{{- else if eq .Values.webui.service.type "NodePort" }}
  
  è·å–è®¿é—®åœ°å€ï¼š
  export NODE_IP=$(kubectl get nodes -o jsonpath='{.items[0].status.addresses[?(@.type=="ExternalIP")].address}')
  export NODE_PORT=$(kubectl get svc {{ include "mobile-mpc.fullname" . }}-webui -n {{ .Release.Namespace }} -o jsonpath='{.spec.ports[0].nodePort}')
  echo "è®¿é—®åœ°å€: http://$NODE_IP:$NODE_PORT"

{{- else if eq .Values.webui.service.type "ClusterIP" }}
  
  ä½¿ç”¨ç«¯å£è½¬å‘è®¿é—®ï¼š
  kubectl port-forward -n {{ .Release.Namespace }} svc/{{ include "mobile-mpc.fullname" . }}-webui {{ .Values.webui.service.port }}:{{ .Values.webui.service.port }}
  è®¿é—®åœ°å€: http://localhost:{{ .Values.webui.service.port }}
{{- end }}
{{- end }}

æŸ¥çœ‹ Pod çŠ¶æ€ï¼š
  kubectl get pods -n {{ .Release.Namespace }} -l "app.kubernetes.io/instance={{ .Release.Name }}"

æŸ¥çœ‹æ—¥å¿—ï¼š
  # Company èŠ‚ç‚¹æ—¥å¿—
  kubectl logs -n {{ .Release.Namespace }} -l "app.kubernetes.io/component=company" -f

  # Partner èŠ‚ç‚¹æ—¥å¿—
  kubectl logs -n {{ .Release.Namespace }} -l "app.kubernetes.io/component=partner" -f

æœåŠ¡åœ°å€ï¼š
{{- if .Values.company.enabled }}
  Company SPU: {{ include "mobile-mpc.fullname" . }}-company-svc:{{ .Values.company.service.ports.spu }}
  Ray Head:    {{ include "mobile-mpc.fullname" . }}-company-svc:{{ .Values.company.service.ports.ray }}
{{- end }}
{{- if .Values.partner.enabled }}
  Partner SPU: {{ include "mobile-mpc.fullname" . }}-partner-svc:{{ .Values.partner.service.ports.spu }}
{{- end }}

æ›´å¤šå‘½ä»¤ï¼š
  helm status {{ .Release.Name }} -n {{ .Release.Namespace }}
  helm get values {{ .Release.Name }} -n {{ .Release.Namespace }}
  helm upgrade {{ .Release.Name }} ./helm-chart/mobile-mpc-project -n {{ .Release.Namespace }}

